---
title: "Template"
author: "Adham Artimi (2676721), Daniel Mohammadpour (2749227), Nikki Borgen (2853132), Jip Allessie (2786323), Student 5 (0123456), Student 6 (0123456), Student 7 (0123456) "
date: "`r Sys.Date()`"
output: pdf_document
---

# Set-up your environment

```{r package_install, include=FALSE}
install.packages("tidyverse")
```

```{r packages}
require(tidyverse)
```

# Title Page

Include your names

Include the tutorial group number

Include your tutorial lecturer's name

# Part 1 - Identify a Social Problem

Use APA referencing throughout your document. [Here's a link to some explanation.](https://www.mendeley.com/guides/apa-citation-guide/)

## 1.1 Describe the Social Problem

Include the following:

-   Why is this relevant?

-   ...

# Part 2 - Data Sourcing

## 2.1 Load in the data

Preferably from a URL, but if not, make sure to download the data and store it in a shared location that you can load the data in from. Do not store the data in a folder you include in the Github repository!


```r
```{r loading_data, message=FALSE, warning=FALSE}
# Load necessary package
library(tidyverse)

# Set the working directory (adjust if needed for your system)
setwd("~/Desktop/progming")

# Load the two datasets from local CSV files
rondkomen <- read.csv("MOEITE_MET_RONDKOMEN_BUURTEN_AMSTERDAM.csv")
klachten <- read.csv("PSYCHISCHE_KLACHTEN_BUURTEN_AMSTERDAM.csv")

# Check the structure of the raw datasets (optional for debugging)
str(rondkomen)
str(klachten)

# Clean 'rondkomen' dataset:
# - Remove rows with missing names or aggregate national/city rows
rondkomen_clean <- rondkomen %>%
  filter(!is.na(GEBIED_NAAM)) %>%
  filter(!GEBIED_NAAM %in% c("Nederland", "Gemeente: Amsterdam"))

# Clean 'klachten' dataset similarly
klachten_clean <- klachten %>%
  filter(!is.na(GEBIED_NAAM)) %>%
  filter(!GEBIED_NAAM %in% c("Nederland", "Gemeente: Amsterdam"))

# Rename columns in both datasets for easier reference
rondkomen_clean <- rondkomen_clean %>%
  rename(
    buurt = GEBIED_NAAM,
    rondkomen_18plus = X18_en_ouder,
    rondkomen_18_65 = X18_tot_65,
    rondkomen_65plus = X65_en_ouder
  )

klachten_clean <- klachten_clean %>%
  rename(
    buurt = GEBIED_NAAM,
    klachten_18plus = X18_en_ouder,
    klachten_18_65 = X18_tot_65,
    klachten_65plus = X65_en_ouder
  )

# Merge the two datasets by neighborhood name (buurt)
merged_data <- left_join(rondkomen_clean, klachten_clean, by = "buurt")

#midwest is an example dataset included in the tidyverse package

## 2.2 Provide a short summary of the dataset(s)

# Display the first few rows of the merged dataset
head(merged_data) 

#We use two datasets obtained from the public platform Buurtatlas, which provides local health and wellbeing statistics in the Netherlands. The indicators we selected are:

    #Dataset 1: Moeite met Rondkomen (Difficulty Making Ends Meet) URL https://buurtatlas.vzinfo.nl/#moeite_met_rondkomen

    #Dataset 2: Psychische Klachten (Psychological Complaints) URL https://buurtatlas.vzinfo.nl/#psychische_klachten

#Each dataset's structure is consistent:

    #GEBIED_NAAM: Name of the neighborhood (e.g., "Bos en Lommer", "IJburg West")

    #X18_en_ouder: Percentage of individuals aged 18 and over reporting the issue

    #X18_tot_65: Percentage of individuals aged 18 to 65

    #X65_en_ouder: Percentage of individuals aged 65 and older

#However, some rows represent aggregate totals such as "Nederland" or "Gemeente: Amsterdam" and were removed to focus on neighborhood-level variation. Additionally, some values are missing (NA), likely due to data protection or insufficient sample sizes in smaller areas.

#After cleaning and renaming columns, the datasets were merged by GEBIED_NAAM (renamed to buurt). This resulted in a single dataframe, merged_data, which allows direct comparison of financial difficulty and mental health complaints across Amsterdam neighborhoods.

```
## 2.3 Describe the type of variables included

The variables in our dataset represent both **health-related** and **socioeconomic** indicators:

- The *Moeite met Rondkomen* dataset captures **socioeconomic status (SES)** by indicating the percentage of people who experience financial difficulty.
- The *Psychische Klachten* dataset captures **mental health status** through the percentage of people who report psychological complaints.

All variables are expressed as **percentages (%)** of individuals within defined age groups (`18+`, `18â€“65`, `65+`) at the neighborhood level.

According to the metadata provided on https://buurtatlas.vzinfo.nl, the data is collected via **national surveys** and **modeled estimates** at the municipal and neighborhood levels. This suggests a combination of self-reported survey results and statistical estimation techniques, rather than purely administrative records.

These indicators allow us to examine the intersection between financial stress and mental health across different neighborhoods in Amsterdam.

# Part 3 - Quantifying

## 3.1 Data cleaning

Say we want to include only larger distances (above 2) in our dataset, we can filter for this.

```{r data_cleaning}
mean(dataset$percollege)
```

Please use a separate 'R block' of code for each type of cleaning. So, e.g. one for missing values, a new one for removing unnecessary variables etc.

## 3.2 Generate necessary variables

Variable 1

```{r gen_var1}

```

Variable 2

```{r gen_var2}

```

## 3.3 Visualize temporal variation

```{r}

```

## 3.4 Visualize spatial variation

```{r visualise_map}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.5 Visualize sub-population variation

What is the poverty rate by state?

```{r visualise_subpopulations}
dataset$inmetro <- dataset$inmetro %>% as.factor()
# Boxplot of poverty rate by state using the 'midwest' dataset
ggplot(dataset, aes(x = inmetro, y = percadultpoverty)) +
  geom_boxplot() +
  labs(
    title = "Distribution of Poverty Rates by Metropolitan status (Midwest counties)",
    x = "Metropolitan Area",
    y = "Poverty Rate of Adults (%)"
  ) +
  theme_minimal() +
  theme(
    legend.position = "right"
  )
```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.6 Event analysis

Analyze the relationship between two variables.

```{r analysis}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

# Part 4 - Discussion

## 4.1 Discuss your findings

# Part 5 - Reproducibility

## 5.1 Github repository link

Provide the link to your PUBLIC repository here: ...

## 5.2 Reference list

Use APA referencing throughout your document.

