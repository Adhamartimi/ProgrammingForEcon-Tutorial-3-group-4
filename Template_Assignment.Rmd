---
  title: "Templatep"
author: "Adham Artimi (2676721), Daniel Mohammadpour (2749227), Nikki Borgen (2853132), Jip Allessie (2786323), Student 5 (0123456), Student 6 (0123456), Student 7 (0123456) "
date: "`r Sys.Date()`"
output: pdf_document
---
  
  # Set-up your environment
  
  ```{r package_install, include=FALSE}
install.packages("tidyverse")
```

```{r packages}
require(tidyverse)
```

# Title Page

Include your names

Include the tutorial group number

Include your tutorial lecturer's name

# Part 1 - Identify a Social Problem

Use APA referencing throughout your document. [Here's a link to some explanation.](https://www.mendeley.com/guides/apa-citation-guide/)

## 1.1 Describe the Social Problem

Include the following:
  
  -   Why is this relevant?
  
  -   ...

# Part 2 - Data Sourcing

## 2.1 Load in the data

The data for this project was downloaded from the [Volksgezondheid en Zorg Buurtatlas](https://buurtatlas.vzinfo.nl), a public health platform that provides neighborhood-level statistics across the Netherlands.

We use two separate CSV files:
  - **MOEITE_MET_RONDKOMEN_BUURTEN_AMSTERDAM.csv**  
  - **PSYCHISCHE_KLACHTEN_BUURTEN_AMSTERDAM.csv**
  
  These were manually downloaded and loaded locally from the shared group folder (as per assignment instructions).

```{r loading_data, message=FALSE, warning=FALSE}
# Load required package
library(tidyverse)

# Set working directory (adjust this path if needed for your setup)
setwd("~/Desktop/progming")

# Load the two datasets
rondkomen <- read.csv("MOEITE_MET_RONDKOMEN_BUURTEN_AMSTERDAM.csv")
klachten <- read.csv("PSYCHISCHE_KLACHTEN_BUURTEN_AMSTERDAM.csv")

# Show the structure of both datasets
str(rondkomen)
str(klachten)

dim(rondkomen)
dim(klachten)

colnames(rondkomen)
colnames(klachten)

#We will clean and merge the datasets in Section 3.1 to enable joint analysis

## 2.2 Provide a short summary of the dataset(s)

# Show first few rows of each raw dataset
head(rondkomen)
head(klachten)
summary(rondkomen)
summary(klachten)

#We use two datasets from the Volksgezondheid en Zorg Buurtatlas, which provide neighborhood-level statistics related to health and socioeconomic well-being in the Netherlands.

#Dataset 1: Moeite met Rondkomen (Difficulty Making Ends Meet)

#Dataset 2: Psychische Klachten (Psychological Complaints)
```
## 2.3 Describe the type of variables included

#The variables in our dataset represent both **health-related** and **socioeconomic** indicators:
  
#- The *Moeite met Rondkomen* dataset captures **socioeconomic status (SES)** by indicating the percentage of people who experience financial difficulty.
#- The *Psychische Klachten* dataset captures **mental health status** through the percentage of people who report psychological complaints.

#All variables are expressed as **percentages (%)** of individuals within defined age groups (`18+`, `18â€“65`, `65+`) at the neighborhood level.

#According to the metadata provided on https://buurtatlas.vzinfo.nl, the data is collected via **national surveys** and **modeled estimates** at the municipal and neighborhood levels. This suggests a combination of self-reported survey results and statistical estimation techniques, rather than purely administrative records.

#These indicators allow us to examine the intersection between financial stress and mental health across different neighborhoods in Amsterdam.

# Part 3 - Quantifying

## 3.1 Data cleaning

We cleaned each dataset by removing rows with missing area names or aggregate totals ("Nederland", "Gemeente: Amsterdam"). We then renamed columns to be more interpretable.

###Remove missing and aggregate rows

```{r data_cleaning_step1}
# Filter out rows without specific neighborhoods
rondkomen_clean <- rondkomen %>%
  filter(!is.na(GEBIED_NAAM)) %>%
  filter(!GEBIED_NAAM %in% c("Nederland", "Gemeente: Amsterdam"))

klachten_clean <- klachten %>%
  filter(!is.na(GEBIED_NAAM)) %>%
  filter(!GEBIED_NAAM %in% c("Nederland", "Gemeente: Amsterdam"))

# Rename for clarity
rondkomen_clean <- rondkomen_clean %>%
  rename(
    buurt = GEBIED_NAAM,
    rondkomen_18plus = X18_en_ouder,
    rondkomen_18_65 = X18_tot_65,
    rondkomen_65plus = X65_en_ouder
  )

klachten_clean <- klachten_clean %>%
  rename(
    buurt = GEBIED_NAAM,
    klachten_18plus = X18_en_ouder,
    klachten_18_65 = X18_tot_65,
    klachten_65plus = X65_en_ouder
  )


## 3.2 Generate necessary variables

#We create two new variables: one representing the average percentage of residents per neighborhood who report financial difficulty (`rondkomen_avg`),
#and one for psychological complaints (`klachten_avg`). These values are calculated by averaging across all age groups.

```{r gen_var1}
# Add average score across age groups for financial difficulty
rondkomen_clean <- rondkomen_clean %>%
  mutate(rondkomen_avg = rowMeans(select(., rondkomen_18plus, rondkomen_18_65, rondkomen_65plus), na.rm = TRUE))

# Add average score across age groups for psychological complaints
klachten_clean <- klachten_clean %>%
  mutate(klachten_avg = rowMeans(select(., klachten_18plus, klachten_18_65, klachten_65plus), na.rm = TRUE))

# Merge datasets by 'buurt'
merged_data <- left_join(rondkomen_clean, klachten_clean, by = "buurt")

## 3.3 Visualize temporal variation

#The datasets used in this project represent a single cross-section in time and do not include observations from multiple years. Therefore, it is not possible to visualize temporal variation using this data.

#According to the metadata from [Buurtatlas](https://buurtatlas.vzinfo.nl), the figures are based on the most recent available survey year (likely 2023), but no time series information is included in the CSV files.

#As a result, we focus our analysis on **spatial** and **sub-population** variation instead.

## 3.4 Visualize spatial variation



```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.5 Visualize sub-population variation

What is the poverty rate by state?
  
  ```{r visualise_subpopulations}
dataset$inmetro <- dataset$inmetro %>% as.factor()
# Boxplot of poverty rate by state using the 'midwest' dataset
ggplot(dataset, aes(x = inmetro, y = percadultpoverty)) +
  geom_boxplot() +
  labs(
    title = "Distribution of Poverty Rates by Metropolitan status (Midwest counties)",
    x = "Metropolitan Area",
    y = "Poverty Rate of Adults (%)"
  ) +
  theme_minimal() +
  theme(
    legend.position = "right"
  )
```

Here you provide a description of why the plot above is relevant to your specific social problem.

## 3.6 Event analysis

Analyze the relationship between two variables.

```{r analysis}

```

Here you provide a description of why the plot above is relevant to your specific social problem.

# Part 4 - Discussion

## 4.1 Discuss your findings

# Part 5 - Reproducibility

## 5.1 Github repository link

Provide the link to your PUBLIC repository here: ...

## 5.2 Reference list

Use APA referencing throughout your document.

